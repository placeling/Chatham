<div class="grid_24">

    <div class="box_top">

        <h2 class="icon list"><%= t "oauth.client_applications" %></h2>

        <h3 class="right"><a href="#contents">Top</a></h3>
    </div>

    <div class="box_content padding">

        <% unless @tokens.empty? %>
        <p><%= t('oauth.authorized_apps') %></p>
          <table class="sorting">
          <thead>
            <tr><th><%= t("oauth.application") %></th><th><%= t("oauth.issued") %></th><th>&nbsp;</th></tr>
          </thead>
          <tbody>
              <% @tokens.each do |token|%>
                <% content_tag_for :tr, token do %>
                  <td><%= link_to token.client_application.name, token.client_application.url %></td>
                  <td><%= token.authorized_at %></td>
                  <td>
                    <% form_tag :controller => 'oauth', :action => 'revoke' do %>
                    <%= hidden_field_tag 'token', token.token %>
                    <%= submit_tag "Revoke!" %>
                    <% end %>
                  </td>
                <% end %>
              <% end %>
          </tbody>
        </table>
          <br/><br/><br/>
        <% end %>
        <h3>Application Developers</h3>
        <% if @client_applications.empty? %>
          <p>
            Do you have an application you would like to register for use with us using the <a href="http://oauth.net">OAuth</a> standard?
          </p>
          <p>
            You must register your web application before it can make OAuth requests to this service
          </p>
        <% else %>
          <p>
            You have the following client applications registered:
          </p>
          <% @client_applications.each do |client|%>
            <% div_for client do %>
              <%= link_to client.name, oauth_client_path(client) %>-
                <%= link_to 'Edit', edit_oauth_client_path(client) %>
                <%= link_to 'Delete', oauth_client_path(client), :confirm => "Are you sure?", :method => :delete %>
            <% end %>
          <% end %>
        <% end %>
        <br />
        <h3><%= link_to t('oauth.register_new_app'), :action => :new %></h3>
    </div>
</div>



