$('#perspective_<%= @perspective.id %> .interact').fadeOut(100);
$("#perspective_<%= @perspective.id %> .interact").html('<a rel="nofollow" data-remote="true" data-method="post" href="<%= unstar_perspective_path(@perspective) %>" class="star_link"><%= image_tag "starred.png", :alt=>"Unstar" %></a>');
$('#perspective_<%= @perspective.id %> .interact').fadeIn(100);
$('.star_link').unbind('hover');
$('.star_link').hover(
  function() {
    var source = $('img', this).attr('src');
    if (source.indexOf('unstarred.png') >= 0) {
      $('img', this).attr('src', '<%= asset_path('starred.png') %>');
      $('img', this).css({'opacity':'0.4'});
    }
  }, 
  function() {
    if ($('img', this).css('opacity') == '0.4') {
      $('img', this).attr('src', '<%= asset_path('unstarred.png') %>');
      $('img', this).css({'opacity':'1.0'});
    }
  }
);
$("#placemark").fadeOut(100);
var placemarkCount = parseInt($('#placemark_count').text());
placemarkCount += 1;
$('#placemark_count').text(placemarkCount);

<% if URI(request.referer).path == place_path(@perspective.place) %>
  if ($('#my_perspective').length == 0) {
    $("#place_details").after('<div id="my_perspective" class="perspective_group"><%= escape_javascript(render :partial => "perspectives/show", :locals => {:perspective => @my_perspective, :source => "place_page_empty"}) %></div>').fadeIn(200);
  }
<% end %>